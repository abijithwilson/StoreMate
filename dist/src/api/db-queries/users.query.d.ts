export declare const fetchAddressDetailQuery = "\nselect \nma.id ,\nma.address ,\nma.country_id ,\nma .state_id ,\nc.country_name,\nd.district_name ,\ns.state_name ,\nma.district_id ,\nma.user_id ,\nma.locality ,\nma.pincode\nfrom m_address ma\nleft join countries c ON ma .country_id = c.country_id \nleft join states s on ma.state_id = s.state_id \nleft join districts d ON ma.district_id = d.district_id \nwhere ma.user_id = $1\n";
export declare const updateUserRewardQuery = "with selectStoreId as \n (select store_id, section_id, beacon_id from m_beacon where major_id = $1 ) ,\n\n updateExitStatus as (\n    update t_section_visit \n    set entry_status = false,\n    exit_date_time = CURRENT_TIMESTAMP\n    where cast(user_id as int)  = cast($2 as int)  and \n    entry_status= true ),\n\n    addUserEntry as (\n        insert into t_section_visit (beacon_id,user_id, section_id, store_id)\n    select beacon_id , cast($2 as int), section_id, store_id  \n    from selectStoreId),\n\n  selectReward as (\n  select per_visit_points,\n  store_id,total_remaining_points from m_reward where store_id = \n  (select store_id from selectStoreId) ),\n  \n  findUser as (\n  select user_id from t_reward_user_track trut\n  where user_id=$2 and \n  created_at = current_date \n  and store_id=(select store_id from selectReward)),\n  \n  insertUserRewardDetails as \n  (insert into t_reward_user_track(user_id,store_id,reward_points,created_at)\n  select $2,store_id,per_visit_points,current_date\n  from selectReward\n  where not exists\n  (select user_id  from findUser)\n  and total_remaining_points - per_visit_points >= 0\n  returning id) ,\n  \n  updateUserReward as (\n  update m_users\n  set reward_points_earned =coalesce (reward_points_earned,0) + \n  (select per_visit_points from selectReward)\n  where EXISTS(select id from  insertUserRewardDetails) and id=$2\n  returning id\n  )    \n  \n  update m_reward \n  set total_remaining_points = total_remaining_points - per_visit_points \n  where total_remaining_points - per_visit_points >=0\n  and EXISTS(select id from  insertUserRewardDetails)\n  returning (select id from updateUserReward)";
export declare const userExitQuery = "\n  with fetchBeaconDetails as(\n    select beacon_id from m_beacon mb \n    where mb.device_id = $1\n    )\n    update t_section_visit \n    set entry_status = false,\n    exit_date_time = current_timestamp \n    where entry_status = true and user_id = $2\n    returning user_id\n  ";
